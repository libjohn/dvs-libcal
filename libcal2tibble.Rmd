---
title: "Rvest: convert LibCal feed to Tibble"
author: "John Little"
date: "`r Sys.Date()`"
output: html_notebook
---

## Libraries
 
```{r load libraries}
library(tidyverse)
library(rvest)
```
  
## Load Data 

```{r}
libcal <- read_html("https://api3.libcal.com/api_events.php?iid=971&m=upc&cid=3819&c=&d=25858&l=50&target=_blank")
```

### Build a Tibble

```{r}
libcal %>% 
  html_nodes("table") %>% 
  .[[1]] %>% 
  html_table() %>% 
  spread(X1, X2) -> big_df


for (i in 2:length(libcal %>% html_nodes("table"))) {
  libcal %>% 
    html_nodes("table") %>% 
    .[[i]] %>% 
    html_table() %>% 
    spread(X1, X2) -> temp_df2
  
  big_df <- bind_rows(big_df, temp_df2)
  
  
}

big_df


```



